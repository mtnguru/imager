<?php

/**
 * @file
 * Provides full image viewing and editing capability from a page of thumbnails.
 */

use Drupal\Core\Routing\RouteMatchInterface;
use Drupal\Core\Form\FormStateInterface;
use Drupal\imager\ImagerHelp;
use Drupal\user\UserInterface;
use Drupal\Core\Entity\Display\EntityViewDisplayInterface;

/**
 * Implements hook_help().
 */
function imager_help($route_name, RouteMatchInterface $route_match) {
  switch ($route_name) {
    // Main module help for the imager module.
    case 'help.page.imager':
      return ImagerHelp::content();

    default:
      return null;

  }
}

/**
 * Implements hook_theme().
 */
function imager_theme() {
  return array(
    'imager_formatter' => array(
      'variables' => array(
        'item' => null,
        'item_attributes' => null,
        'url' => null,
        'image_style' => null),
      'file' => 'imager.field.inc',
    ),
  );
}

/**
 * Implements hook_form_FORM_ID_alter().
 *
 * FORM ID: media_image_form
 * Set default photographer to be the logged in user.
 */
function imager_form_media_image_form_alter(&$form, FormStateInterface $form_state, $form_id) {
  $form['field_photographer']['widget'][0]['target_id']['#default_value'] =
    \Drupal\user\Entity\User::load(\Drupal::currentUser()->id());
}

